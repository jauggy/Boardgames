
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="width:100%">
            <div class="modal-content">
                <div class="modal-body" id="techtable">
                    <nav class="navbar navbar-inverse" role="navigation">
                        <div class="container-fluid">
                            <!-- Brand and toggle get grouped for better mobile display -->
                            <div class="navbar-header">
                                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-9">
                                    <span class="sr-only">Toggle navigation</span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                </button>
                                <a class="navbar-brand" href="#">Brand</a>
                            </div>

                            <!-- Collect the nav links, forms, and other content for toggling -->
                            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-9">
                                <ul class="nav navbar-nav">
                                    <li class="active"><a href="#">Home</a></li>
                                    <li><a href="#">Link</a></li>
                                    <li class="dropdown">
                                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span id="selectedPlayer"></span><span class="caret"></span></a>
                                        <ul id="playerList" class="dropdown-menu" role="menu">
                                        </ul>
                                    </li>
                                </ul>
                            </div><!-- /.navbar-collapse -->
                        </div><!-- /.container-fluid -->
                    </nav>
                    <div id="pbPlaceholder">
                        
                    </div>


                   
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="saveButton">Save changes</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Modal title</h4>
                </div>
                <div class="modal-body" id="myModalBody">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="saveButton">Save changes</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->


    <script type="text/javascript">
        var _model;

        $('#myModal').on('show.bs.modal', function () {

        });

        function GetPlayerBoardUI() {
            $.ajax({
                url: "EclipseService.asmx/GetPlayerBoardUI",
                data: '{}',
                dataType: "json",
                type: "POST",
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    var model = data["d"];
                    _model = model;
                    $('#selectedPlayer').html(model.CurrentPlayer.Name)
                    $('#playerList').empty();
                    $(model.Players).each(function (index, item) {
                        
                        var listItem = $('<li class="active"><a href="javascript:void(0)">' + item.Name + '</a></li>');
                        $('#playerList').append(listItem);
                        debugger;
                        
                    });

                    
                    DrawTechnologies(_model.CurrentPlayer.PlayerBoard);
                }
            });
        }

        function DrawTechnologies(playerBoard) {
            $('#gridTechs').empty();
            $(playerBoard.Technologies).each(function (index, tech) {
                var techButton = $('<li><button class="btn btn-default">'+tech.Name+'s</button></li>');
                $('#gridTechs').append(techButton);

            });
        }

        function SetPlayerBoard(playerName) {
            var result = jQuery.grep(_model.Players, function (player) {
                return player.Name == playerName;
            });
            DrawTechnologies(result[0].PlayerBoard);
            
        }

        $(document).ready(function () {
      
            $('.nav li').on('click', function (event) {
                $('.nav li').removeClass('active'); // remove active class from tabs
                $(this).addClass('active'); // add active class to clicked tab
            });
            //load other html
            $('#pbPlaceholder').load('PlayerTechnologyView.html');
            $('#myModal').modal();

            $('#saveButton').click(function () {
                $('#myModal2').modal();
            });




            GetPlayerBoardUI();

            $('#playerList').on('click', 'li', function () {
                // snip...
                SetPlayerBoard($(this).text());
            });

            $(".dropdown-menu").on('click', 'li',function () {

                var button = $(this).parents('.dropdown').find('.dropdown-toggle');
                button.html($(this).text() + ' <span class="caret">');
                button.val($(this).text());

            });

        });

       

       
    </script>
